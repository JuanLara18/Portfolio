"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[602],{6256:(e,t,a)=>{function i(e,t){var a,i,n;e.accDescr&&(null===(a=t.setAccDescription)||void 0===a||a.call(t,e.accDescr));e.accTitle&&(null===(i=t.setAccTitle)||void 0===i||i.call(t,e.accTitle));e.title&&(null===(n=t.setDiagramTitle)||void 0===n||n.call(t,e.title))}a.d(t,{S:()=>i}),(0,a(7789).K2)(i,"populateCommonDb")},7602:(e,t,a)=>{a.d(t,{diagram:()=>C});var i=a(6256),n=a(4272),l=a(7186),c=a(7789),o=a(5502),r=a(9198),s=c.UI.pie,d={sections:new Map,showData:!1,config:s},p=d.sections,u=d.showData,g=structuredClone(s),h=(0,c.K2)((()=>structuredClone(g)),"getConfig"),f=(0,c.K2)((()=>{p=new Map,u=d.showData,(0,c.IU)()}),"clear"),m=(0,c.K2)((e=>{let{label:t,value:a}=e;if(a<0)throw new Error('"'.concat(t,'" has invalid value: ').concat(a,". Negative values are not allowed in pie charts. All slice values must be >= 0."));p.has(t)||(p.set(t,a),c.Rm.debug("added new section: ".concat(t,", with value: ").concat(a)))}),"addSection"),v=(0,c.K2)((()=>p),"getSections"),w=(0,c.K2)((e=>{u=e}),"setShowData"),S=(0,c.K2)((()=>u),"getShowData"),x={getConfig:h,clear:f,setDiagramTitle:c.ke,getDiagramTitle:c.ab,setAccTitle:c.SV,getAccTitle:c.iN,setAccDescription:c.EI,getAccDescription:c.m7,addSection:m,getSections:v,setShowData:w,getShowData:S},D=(0,c.K2)(((e,t)=>{(0,i.S)(e,t),t.setShowData(e.showData),e.sections.map(t.addSection)}),"populateDb"),T={parse:(0,c.K2)((async e=>{const t=await(0,o.qg)("pie",e);c.Rm.debug(t),D(t,x)}),"parse")},b=(0,c.K2)((e=>"\n  .pieCircle{\n    stroke: ".concat(e.pieStrokeColor,";\n    stroke-width : ").concat(e.pieStrokeWidth,";\n    opacity : ").concat(e.pieOpacity,";\n  }\n  .pieOuterCircle{\n    stroke: ").concat(e.pieOuterStrokeColor,";\n    stroke-width: ").concat(e.pieOuterStrokeWidth,";\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ").concat(e.pieTitleTextSize,";\n    fill: ").concat(e.pieTitleTextColor,";\n    font-family: ").concat(e.fontFamily,";\n  }\n  .slice {\n    font-family: ").concat(e.fontFamily,";\n    fill: ").concat(e.pieSectionTextColor,";\n    font-size:").concat(e.pieSectionTextSize,";\n    // fill: white;\n  }\n  .legend text {\n    fill: ").concat(e.pieLegendTextColor,";\n    font-family: ").concat(e.fontFamily,";\n    font-size: ").concat(e.pieLegendTextSize,";\n  }\n")),"getStyles"),y=(0,c.K2)((e=>{const t=[...e.values()].reduce(((e,t)=>e+t),0),a=[...e.entries()].map((e=>{let[t,a]=e;return{label:t,value:a}})).filter((e=>e.value/t*100>=1)).sort(((e,t)=>t.value-e.value));return(0,r.rLf)().value((e=>e.value))(a)}),"createPieArcs"),C={parser:T,db:x,renderer:{draw:(0,c.K2)(((e,t,a,i)=>{c.Rm.debug("rendering pie chart\n"+e);const o=i.db,s=(0,c.D7)(),d=(0,n.$t)(o.getConfig(),s.pie),p=18,u=450,g=u,h=(0,l.D)(t),f=h.append("g");f.attr("transform","translate(225,225)");const{themeVariables:m}=s;let[v]=(0,n.I5)(m.pieOuterStrokeWidth);null!==v&&void 0!==v||(v=2);const w=d.textPosition,S=Math.min(g,u)/2-40,x=(0,r.JLW)().innerRadius(0).outerRadius(S),D=(0,r.JLW)().innerRadius(S*w).outerRadius(S*w);f.append("circle").attr("cx",0).attr("cy",0).attr("r",S+v/2).attr("class","pieOuterCircle");const T=o.getSections(),b=y(T),C=[m.pie1,m.pie2,m.pie3,m.pie4,m.pie5,m.pie6,m.pie7,m.pie8,m.pie9,m.pie10,m.pie11,m.pie12];let k=0;T.forEach((e=>{k+=e}));const A=b.filter((e=>"0"!==(e.data.value/k*100).toFixed(0))),K=(0,r.UMr)(C);f.selectAll("mySlices").data(A).enter().append("path").attr("d",x).attr("fill",(e=>K(e.data.label))).attr("class","pieCircle"),f.selectAll("mySlices").data(A).enter().append("text").text((e=>(e.data.value/k*100).toFixed(0)+"%")).attr("transform",(e=>"translate("+D.centroid(e)+")")).style("text-anchor","middle").attr("class","slice"),f.append("text").text(o.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const R=[...T.entries()].map((e=>{let[t,a]=e;return{label:t,value:a}})),z=f.selectAll(".legend").data(R).enter().append("g").attr("class","legend").attr("transform",((e,t)=>"translate(216,"+(22*t-22*R.length/2)+")"));z.append("rect").attr("width",p).attr("height",p).style("fill",(e=>K(e.label))).style("stroke",(e=>K(e.label))),z.append("text").attr("x",22).attr("y",14).text((e=>o.getShowData()?"".concat(e.label," [").concat(e.value,"]"):e.label));const M=512+Math.max(...z.selectAll("text").nodes().map((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0})));h.attr("viewBox","0 0 ".concat(M," ").concat(u)),(0,c.a$)(h,u,M,d.useMaxWidth)}),"draw")},styles:b}}}]);
//# sourceMappingURL=602.8aa793db.chunk.js.map